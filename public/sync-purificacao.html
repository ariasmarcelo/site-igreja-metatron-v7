<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sync PurificaÃ§Ã£o â†’ Supabase</title>
    <link rel="stylesheet" href="/admin-utils.css">
</head>
<body class="admin-terminal-body">
    <h1 class="admin-terminal-title">ğŸ”„ Sincronizar Purificacao.json â†’ Supabase (via API ProduÃ§Ã£o)</h1>
    <button id="syncBtn" class="admin-terminal-button">
        â–¶ï¸ SINCRONIZAR AGORA
    </button>
    <pre id="output" class="admin-terminal-output"></pre>

    <script type="module">
        const API_URL = 'https://shadcn-ui-seven-olive.vercel.app';
        
        document.getElementById('syncBtn').onclick = async () => {
            const output = document.getElementById('output');
            output.textContent = 'ğŸ“¡ Carregando JSON local...\n';
            
            try {
                const response = await fetch('/src/locales/pt-BR/Purificacao.json');
                const purificacaoData = await response.json();
                
                output.textContent += 'âœ… JSON carregado\n';
                output.textContent += `ğŸ“‹ intro1: ${purificacaoData.psicodelicos.intro1}\n`;
                output.textContent += `ğŸ“‹ intro2: ${purificacaoData.psicodelicos.intro2}\n\n`;
                output.textContent += `ğŸ“¤ Enviando para ${API_URL}/api/save-json...\n`;
                
                const apiResponse = await fetch(`${API_URL}/api/save-json`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        pageId: 'purificacao',
                        content: purificacaoData
                    })
                });
                
                const result = await apiResponse.json();
                
                if (apiResponse.ok) {
                    output.textContent += `âœ… ${result.message}\n`;
                    output.textContent += '\nğŸ”„ Recarregue a pÃ¡gina: http://localhost:8080/purificacao\n';
                } else {
                    output.textContent += `âŒ Erro: ${result.message}\n`;
                }
            } catch (err) {
                output.textContent += `âŒ Erro: ${err.message}\n`;
                console.error(err);
            }
        };
    </script>
</body>
</html>
